# Log Collection Server 
(Rsyslog/Filebeat/Logstash/ElasticSearch)

Installation script to automatically configure an Ubuntu 16.04 x64 server with rsyslog reception, filebeat, logstash and elasticsearch.

The basic setup of this configuration relies on the following technologies:

1) Rsyslog with UDP/TCP reception, configured on port 514 but can be edited through the script.
2) Filebeat (Elastic.io) for file monitoring/collection of /var/syslog
3) Logstash (Elastic.io) as transport to ElasticSearch
4) ElasticSearch (Elastic.io) as document store

Kibana is not installed, this is strictly for processing log data and not for the visualization component.

Basic Flow:

CLIENT SERVER (REMOTE) >> UDP or TCP on port 514 Syslog Events >> LOG SERVER (This Script) >> Rsyslog UDP or TCP 514 Receptor >> /var/syslog/ >> Filebeat >> Logstash >> Elasticsearch

Not covered in this script:

1) Elasticsearch cluster.
2) CLIENT SERVER filebeat directly to LOG SERVER logstash. Can be configured, but chose rsyslog as transport. SSL certificates however ARE generated by this script and placed on /etc/pki/tls/certs/ (logstash-forwarder.crt), so move this over to the client after installing filebeat, and configure the YAML configuration file to include TLS and the certificate path if you want to use filebeat for transport instead of rsyslog.
3) Mult client server support. The script will only ask for ONE client server IP. To configure more IPs edit the rsyslog configuration file under /etc/rsyslog.d/ to allow other senders over TCP or UDP transports (i.e.: "$AllowSender UDP, 1.2.3.4").

Note: Remember to chmod +x install.sh to make it executable! Then run ./install.sh
